!function(){"use strict";class t{constructor(t,e,s){let{name:n,link:i}=t;this._name=n,this._link=i,this._cardSelector=e,this._handlePreviewImage=s,this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._trashButton=this._cardElement.querySelector(".card__trash-button"),this._setEventListeners()}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handlePreviewImage(this._name,this._link)})),this._likeButton.addEventListener("click",(()=>{this._handleLikeIcon()})),this._trashButton.addEventListener("click",(()=>{this._handleTrashButton()}))}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_handleTrashButton(){this._cardElement.remove(),this._cardElement=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardElement}}var e=class{constructor(t,e){this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e}_showInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}_hideInputError(t){const e=this._form.querySelector(`#${t.id}-error`);t.classList.remove(this._inputErrorClass),e.textContent="",e.classList.remove(this._errorClass)}toggleButtonState(){if(this._hasInvalidInput())return this._submitButton.classList.add(this._inactiveButtonClass),void(this._submitButton.disabled=!0);this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputEls.every((t=>t.validity.valid))}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}resetValidation(){this.toggleButtonState(),this._inputEls.forEach((t=>{this._hideInputError(t)}))}_setEventListeners(){this._inputEls=Array.from(this._form.querySelectorAll(this._inputSelector)),this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((t=>{t.addEventListener("input",(e=>{this._checkInputValidity(t),this.toggleButtonState(t)}))}))}enableValidation(){this._form.addEventListener("submit",(t=>{t.preventDefault()})),this._setEventListeners()}};class s{constructor(t){this._popupElement=document.querySelector(t)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=t=>{"Escape"===t.key&&this.close()};setEventListeners(){this._popupElement.addEventListener("click",(t=>{(t.target.classList.contains("modal")||t.target.classList.contains("modal__close"))&&this.close()}))}}class n extends s{constructor(t,e){super(t),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=e,this._inputItems=this._popupForm.querySelectorAll(".modal__input")}_getInputValues(){const t={};return this._inputItems.forEach((e=>{t[e.name]=e.value})),t}setInputValues(t){this._inputList.forEach((e=>{e.value=t[e.name]}))}close(){this._popupForm.reset(),super.close()}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(t=>{t.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}}const i={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=document.querySelector("#profile-edit-button"),o=document.querySelector(".profile__add-button"),a=document.querySelector(".profile__title"),l=document.querySelector(".profile__description"),c=document.querySelector("#profile-name-input"),u=document.querySelector("#profile-description-input"),d=document.forms["profile-form"],_=document.forms["card-form"];r.addEventListener("click",(()=>{!function(){const t=E.getUserInfo();c.value=t.name,u.value=t.description}(),v.open(),f.resetValidation()}));const m=e=>{const s=new t(e,"#card-template",S).getView();h.addItem(s)},h=new class{constructor(t,e){let{items:s,renderer:n}=t;this._items=s,this._renderer=n,this._container=document.querySelector(e)}renderItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:m},".cards__card-list");h.renderItems();const p=new n("#add-card-modal",(function(t){m(t)}));p.setEventListeners();const E=new class{constructor(t,e){this.name=t,this.description=e}getUserInfo(){return{name:this.name.textContent,description:this.description.textContent}}setUserInfo(t,e){this.name.textContent=t,this.description.textContent=e}}(a,l),v=new n("#profile-edit-modal",(function(t){E.setUserInfo(t.name,t.description),v.close()}));v.setEventListeners();const f=new e(i,d),g=new e(i,_);f.enableValidation(),g.enableValidation(),o.addEventListener("click",(()=>{g.resetValidation(),p.open()}));const L=new class extends s{constructor(t){super(t),this._cardImage=this._popupElement.querySelector("#preview-image-of-modal"),this._cardTitle=this._popupElement.querySelector(".modal__title-preview")}open(t,e){this._cardImage.src=e,this._cardImage.alt=t,this._cardTitle.textContent=t,super.open()}}("#preview-image");function S(t,e){L.open(t,e)}L.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixZQUNoQitFLFlBQWF2RyxLQUFLdUcsWUFBWS9FLFlBRWxDLENBRUFtRyxXQUFBQSxDQUFZN0gsRUFBTXlHLEdBQ2hCdkcsS0FBS0YsS0FBSzBCLFlBQWMxQixFQUN4QkUsS0FBS3VHLFlBQVkvRSxZQUFjK0UsQ0FDakMsR0ZnRTRCWCxFQUFjQyxHQUV0Q1ksRUFBYyxJQUFJOUIsRUFDdEIsdUJBNUNGLFNBQWlDaUQsR0FDL0J2QixFQUFTc0IsWUFBWUMsRUFBUzlILEtBQU04SCxFQUFTckIsYUFDN0NFLEVBQVlyQyxPQUNkLElBNkNBcUMsRUFBWWpDLG9CQUVaLE1BQU1rQyxFQUFvQixJQUFJbUIsRUFBY3BHLEVBQVV1RSxHQUNoRDhCLEVBQW1CLElBQUlELEVBQWNwRyxFQUFVeUUsR0FFckRRLEVBQWtCN0MsbUJBQ2xCaUUsRUFBaUJqRSxtQkFNakI4QixFQUFpQi9FLGlCQUFpQixTQUFTLEtBQ3pDa0gsRUFBaUJ2RSxrQkFDakJtRSxFQUFZeEQsTUFBTSxJQUdwQixNQUFNNkQsRUFBaUIsSUd0R1IsY0FBNkJoRSxFQUMxQ3JFLFdBQUFBLENBQVlzRSxHQUNWYSxNQUFNYixHQUNOaEUsS0FBS08sV0FBYVAsS0FBS2lFLGNBQWN6RCxjQUNuQywyQkFFRlIsS0FBS2dJLFdBQWFoSSxLQUFLaUUsY0FBY3pELGNBQWMsd0JBQ3JELENBRUEwRCxJQUFBQSxDQUFLcEUsRUFBTUMsR0FDVEMsS0FBS08sV0FBV2UsSUFBTXZCLEVBQ3RCQyxLQUFLTyxXQUFXZ0IsSUFBTXpCLEVBQ3RCRSxLQUFLZ0ksV0FBV3hHLFlBQWMxQixFQUM5QitFLE1BQU1YLE1BQ1IsR0h3RndDLGtCQUkxQyxTQUFTckUsRUFBbUJDLEVBQU1DLEdBQ2hDZ0ksRUFBZTdELEtBQUtwRSxFQUFNQyxFQUM1QixDQUpBZ0ksRUFBZXZELG1CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVQcmV2aWV3SW1hZ2UpIHtcclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGxpbms7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVQcmV2aWV3SW1hZ2UgPSBoYW5kbGVQcmV2aWV3SW1hZ2U7XHJcblxyXG4gICAgLy8gZnJlcXVlbnRseSBhY2Nlc3NlZCBlbGVtZW50c1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fdHJhc2hCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RyYXNoLWJ1dHRvblwiKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVByZXZpZXdJbWFnZSh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gICAgLy8gc2VsZWN0IGxpa2UgYnV0dG9uXHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUxpa2VJY29uKCk7XHJcbiAgICB9KTtcclxuICAgIC8vIHNlbGVjdCBkZWxldGVcclxuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQnV0dG9uKCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVUcmFzaEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xyXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWw7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbCkge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIGVycm9yTWVzc2FnZUVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0RWxzID0gQXJyYXkuZnJvbShcclxuICAgICAgdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRFbCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICAvL29wZW5zIHBvcHVwXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgLy9jbG9zZXMgcG9wdXBcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgLy8gbGlzdGVucyBmb3IgZXNjIGJ1dHRvblxyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gc2V0cyBldmVudCBsaXN0ZW5lcnNcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoXHJcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxyXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlXCIpXHJcbiAgICAgICkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dEl0ZW1zID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gIH1cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRJdGVtcy5mb3JFYWNoKChpbnB1dEl0ZW1zKSA9PiB7XHJcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0SXRlbXMubmFtZV0gPSBpbnB1dEl0ZW1zLnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgaW5wdXQudmFsdWUgPSBkYXRhW2lucHV0Lm5hbWVdO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXHJcbiAgfSxcclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuLy8gSW1wb3J0IGFsbCB0aGUgY2xhc3Nlc1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2VcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm9cIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZXR0aW5ncyB9IGZyb20gXCIuLi91dGlscy9jb25zdGFudHNcIjtcclxuXHJcbi8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cclxuLyogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRWxlbWVudCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqL1xyXG4vKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdGl0bGVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcclxuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5cclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlLWZvcm1cIl07XHJcbmNvbnN0IGNhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJjYXJkLWZvcm1cIl07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGRhdGEpIHtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IG5ldyBDYXJkKGRhdGEsIFwiI2NhcmQtdGVtcGxhdGVcIiwgaGFuZGxlUHJldmlld0ltYWdlKTtcclxuICByZXR1cm4gY2FyZEVsZW1lbnQuZ2V0VmlldygpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBmaWxsUHJvZmlsZUZvcm0oKSB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIHByb2ZpbGVOYW1lSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gIHByb2ZpbGVEZXNjcmlwdGlvbklucHV0LnZhbHVlID0gdXNlckRhdGEuZGVzY3JpcHRpb247XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0KGZvcm1EYXRhKSB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZm9ybURhdGEubmFtZSwgZm9ybURhdGEuZGVzY3JpcHRpb24pO1xyXG4gIHByb2ZpbGVGb3JtLmNsb3NlKCk7XHJcbn1cclxuXHJcbmNvbnN0IGhhbmRsZUVkaXRDbGljayA9ICgpID0+IHtcclxuICBmaWxsUHJvZmlsZUZvcm0oKTtcclxuICBwcm9maWxlRm9ybS5vcGVuKCk7XHJcbiAgZWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbn07XHJcblxyXG5wcm9maWxlRWRpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRWRpdENsaWNrKTtcclxuXHJcbmNvbnN0IHJlbmRlckNhcmQgPSAoY2FyZERhdGEpID0+IHtcclxuICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShuZXdDYXJkKTtcclxufTtcclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXHJcbiAge1xyXG4gICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuXHJcbiAgICByZW5kZXJlcjogcmVuZGVyQ2FyZCxcclxuICB9LFxyXG5cclxuICBcIi5jYXJkc19fY2FyZC1saXN0XCJcclxuKTtcclxuXHJcbmNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XHJcblxyXG4vLyBmb3JtIHBvcHVwXHJcblxyXG5jb25zdCBhZGRDYXJkRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXHJcbiAgaGFuZGxlQ2FyZEFkZEZvcm1TdWJtaXRcclxuKTtcclxuXHJcbmFkZENhcmRGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vL3Byb2ZpZSBlZGl0IHBvcHVwXHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlVGl0bGUsIHByb2ZpbGVEZXNjcmlwdGlvbik7XHJcblxyXG5jb25zdCBwcm9maWxlRm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxyXG4gIGhhbmRsZVByb2ZpbGVFZGl0U3VibWl0XHJcbik7XHJcblxyXG5wcm9maWxlRm9ybS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtKTtcclxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBjYXJkRm9ybSk7XHJcblxyXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEFkZEZvcm1TdWJtaXQoY2FyZERhdGEpIHtcclxuICByZW5kZXJDYXJkKGNhcmREYXRhKTtcclxufVxyXG5cclxuYWRkTmV3Q2FyZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgYWRkQ2FyZEZvcm0ub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3ByZXZpZXctaW1hZ2VcIik7XHJcblxyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuZnVuY3Rpb24gaGFuZGxlUHJldmlld0ltYWdlKG5hbWUsIGxpbmspIHtcclxuICBwb3B1cFdpdGhJbWFnZS5vcGVuKG5hbWUsIGxpbmspO1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9pdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IobmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMubmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24udGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pIHtcclxuICAgIHRoaXMubmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLmRlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGVzY3JpcHRpb247XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjcHJldmlldy1pbWFnZS1vZi1tb2RhbFwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fY2FyZFRpdGxlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlLXByZXZpZXdcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9jYXJkVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiQ2FyZCIsImNvbnN0cnVjdG9yIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImhhbmRsZVByZXZpZXdJbWFnZSIsIm5hbWUiLCJsaW5rIiwidGhpcyIsIl9uYW1lIiwiX2xpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZVByZXZpZXdJbWFnZSIsIl9jYXJkRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9jYXJkSW1hZ2UiLCJxdWVyeVNlbGVjdG9yIiwiX2xpa2VCdXR0b24iLCJfdHJhc2hCdXR0b24iLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZVRyYXNoQnV0dG9uIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVtb3ZlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsInNyYyIsImFsdCIsInRleHRDb250ZW50Iiwic2V0dGluZ3MiLCJmb3JtRWwiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfaW5wdXRFbHMiLCJldmVyeSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JFYWNoIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImUiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50Iiwib3BlbiIsIl9oYW5kbGVFc2NDbG9zZSIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0SXRlbXMiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJpbnB1dFZhbHVlcyIsImlucHV0SXRlbXMiLCJ2YWx1ZSIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsIl9pbnB1dExpc3QiLCJyZXNldCIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkTmV3Q2FyZEJ1dHRvbiIsInByb2ZpbGVUaXRsZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsInByb2ZpbGVOYW1lSW5wdXQiLCJwcm9maWxlRGVzY3JpcHRpb25JbnB1dCIsInByb2ZpbGVFZGl0Rm9ybSIsImZvcm1zIiwiY2FyZEZvcm0iLCJoYW5kbGVFZGl0Q2xpY2siLCJ1c2VyRGF0YSIsInVzZXJJbmZvIiwiZ2V0VXNlckluZm8iLCJkZXNjcmlwdGlvbiIsImZpbGxQcm9maWxlRm9ybSIsInByb2ZpbGVGb3JtIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJyZW5kZXJDYXJkIiwiY2FyZERhdGEiLCJuZXdDYXJkIiwiY2FyZFNlY3Rpb24iLCJhZGRJdGVtIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiYWRkQ2FyZEZvcm0iLCJzZXRVc2VySW5mbyIsImZvcm1EYXRhIiwiRm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJwb3B1cFdpdGhJbWFnZSIsIl9jYXJkVGl0bGUiXSwic291cmNlUm9vdCI6IiJ9